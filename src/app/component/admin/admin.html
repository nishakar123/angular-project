<div class="container-fluid">
  <h1>Admin Page</h1>
  <div class="welcome-message">
    <p>Welcome to the Admin Page!</p>
  </div>
  <div class="cards-container">
    <div class="card">
      <div class="card-header bg-info">
        <h4>User List</h4>
      </div>
      <div class="card-body">
        <div class="table-responsive table-wrapper">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">Index</th>
                <th scope="col">Id</th>
                <th scope="col">Username</th>
                <th scope="col">Password</th>
                <th scope="col">Usertype</th>
                <th scope="col">Name</th>
                <th scope="col">Age</th>
                <th scope="col">Gender</th>
                <th scope="col">Phone</th>
                <th scope="col">Email</th>
                <th scope="col">Address</th>
                <th scope="col">Is Active</th>
              </tr>
            </thead>
            <tbody>
              @for (user of users; track $index) {
              <tr>
                <td>{{$index + 1}}</td>
                <td>{{user.id | na}}</td>
                <td>{{user.username}}</td>
                <td>{{user.password}}</td>
                <td>{{user.userType}}</td>
                <td>{{user.name}}</td>
                <td>{{user.age}}</td>
                <td>{{user.gender}}</td>
                <td>{{user.phone}}</td>
                <td>{{user.email}}</td>
                <td>{{user.address}}</td>
                <td>{{user.isActive}}</td>
                <td>
                  <button class="btn btn-sm btn-warning" (click)="editUser(user)">Edit</button>
                  <div>&nbsp;</div>
                  <button class="btn btn-sm btn-danger" (click)="deleteUser(user.id)">Delete</button>
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="card" style="max-height: 860px;">
      <div class="card-header bg-info">
        <h4>User From</h4><span>Template Form Example</span>
      </div>
      <div class="card-body scrollable-card-body">
        <form #userForm="ngForm" class="row g-3 needs-validation">
          <div class="col-md-12">
            <label class="form-label">Username<span class="text-danger">*</span></label>
            <input type="text" name="username" #username="ngModel" required [(ngModel)]="userObj.username"
              class="form-control">
            @if (username.invalid && (username.touched || username.dirty)) {
            <div class="text-danger">Username is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">Password<span class="text-danger">*</span></label>
            <input type="password" name="password" #password="ngModel" required [(ngModel)]="userObj.password"
              class="form-control">
            @if (password.invalid && (password.touched || password.dirty)) {
            <div class="text-danger">Password is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">User Type<span class="text-danger">*</span></label>
            <select name="userType" #userType="ngModel" required [(ngModel)]="userObj.userType" class="form-select">
              <option selected disabled value="">Select...</option>
              <option>ADMIN</option>
              <option>USER</option>
            </select>
            @if (userType.errors?.['required'] && (userType.touched || userType.dirty)) {
            <div class="text-danger">User Type is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">Name<span class="text-danger">*</span></label>
            <input type="text" name="name" #name="ngModel" required [(ngModel)]="userObj.name" class="form-control">
            @if (name.errors?.['required'] && (name.touched || name.dirty)) {
            <div class="text-danger">Name is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">Age<span class="text-danger">*</span></label>
            <input type="text" name="age" #age="ngModel" required [(ngModel)]="userObj.age" class="form-control">
            @if (age.errors?.['required'] && (age.touched || age.dirty)) {
            <div class="text-danger">Age is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">Gender<span class="text-danger">*</span></label>
            <select name="gender" #gender="ngModel" required [(ngModel)]="userObj.gender" class="form-select">
              <option selected disabled value="">Select...</option>
              <option>MALE</option>
              <option>FEMALE</option>
            </select>
            @if (gender.errors?.['required'] && (gender.touched || gender.dirty)) {
            <div class="text-danger">Gender is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">Phone<span class="text-danger">*</span></label>
            <input type="text" name="phone" #phone="ngModel" required [(ngModel)]="userObj.phone" class="form-control">
            @if (phone.errors?.['required'] && (phone.touched || phone.dirty)) {
            <div class="text-danger">Phone is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">Email<span class="text-danger">*</span></label>
            <input type="text" name="email" #email="ngModel" required [(ngModel)]="userObj.email" class="form-control">
            @if (email.errors?.['required'] && (email.touched || email.dirty)) {
            <div class="text-danger">Email is required.</div>
            }
          </div>
          <div class="col-md-12">
            <label class="form-label">Address<span class="text-danger">*</span></label>
            <textarea name="address" #address="ngModel" required [(ngModel)]="userObj.address" class="form-control" placeholder="Enter Address Here"></textarea>
            @if (address.errors?.['required'] && (address.touched || address.dirty)) {
            <span class="text-danger">
              Please enter a valid address.
            </span>
            }
          </div>
          <div class="col-md-12">
            <input name="isActive" type="checkbox" class="form-check-input is-invalid" [(ngModel)]="userObj.isActive">&nbsp;
            <label>
              is User Active?
            </label>
          </div>
          <div class="col-12 d-flex gap-2 sticky-actions">
            @if (userObj.id == null || userObj.id == 0) {
            <button class="btn btn-primary" type="button" [disabled]="userForm.invalid"
              (click)="createUser(userForm)">Save</button>
            }@else{
            <button class="btn btn-warning" type="button" [disabled]="userForm.invalid"
              (click)="updateUser(userForm)">Update</button>
            }
            <button class="btn btn-secondary" (click)="resetForm(userForm)" type="button">Reset</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
